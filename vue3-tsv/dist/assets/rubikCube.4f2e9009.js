var S=Object.defineProperty;var tt=(p,n,s)=>n in p?S(p,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):p[n]=s;var B=(p,n,s)=>(tt(p,typeof n!="symbol"?n+"":n,s),s);import{L as st,V as w,Q as nt,C as O,B as Z,F as U,a as ot,b as X,M as Q,c as W,T as et,d as k,S as rt,e as at,f as G,O as ct,P as ht}from"./shared/rubikCube/splineView.0d6a40c6.js";class Y extends st{constructor(n,s,o){const r=s.length(),a=new w(0,s.length(),0),e=new nt().setFromUnitVectors(a.clone().normalize(),s.clone().normalize()),F=a.clone().add(new w(r*.05,-r*.1,0)).applyQuaternion(e),R=a.clone().add(new w(-r*.05,-r*.1,0)).applyQuaternion(e),A=a.clone().add(new w(0,-r*.1,r*.05)).applyQuaternion(e),h=a.clone().add(new w(0,-r*.1,-r*.05)).applyQuaternion(e),b=[0,0,0,s.x,s.y,s.z,s.x,s.y,s.z,F.x,F.y,F.z,s.x,s.y,s.z,R.x,R.y,R.z,s.x,s.y,s.z,A.x,A.y,A.z,s.x,s.y,s.z,h.x,h.y,h.z];o=new O(o);const T=[...o.toArray(),...o.toArray(),...o.toArray(),...o.toArray(),...o.toArray(),...o.toArray(),...o.toArray(),...o.toArray(),...o.toArray(),...o.toArray()],C=new Z;C.setAttribute("position",new U(b,3));const V=new ot({vertexColors:!0,toneMapped:!1});super(C,V),C.setAttribute("color",new U(T,3)),this.type="Arrows",this.position.set(n.x,n.y,n.z)}setColors(n){n instanceof O||(n=new O(n));const s=this.geometry.attributes.color.array;return n.toArray(s,3*0),n.toArray(s,3*1),n.toArray(s,3*2),n.toArray(s,3*3),n.toArray(s,3*4),n.toArray(s,3*5),n.toArray(s,3*6),n.toArray(s,3*7),n.toArray(s,3*8),n.toArray(s,3*9),this.geometry.attributes.color.needsUpdate=!0,this}}class lt{constructor(n,s,o){B(this,"arrow");B(this,"afterDotDom",(n,s)=>{const o=document.getElementById("point");o&&(o.style.left=`${n}px`,o.style.top=`${s}px`)});B(this,"lineArr",[]);this.rander=n,this.scene=s,this.camera=o}drawArrows(n,s,o,r=!1){this.arrow?(this.scene.remove(this.arrow),this.arrow=new Y(n,s,o),this.scene.add(this.arrow)):(this.arrow=new Y(n,s,o),this.scene.add(this.arrow)),r&&this.rander.render(this.scene,this.camera)}lineRemove(n=[]){n.length||(n=this.lineArr.map(o=>o.id));const s=this.rander.domElement.parentElement;n.forEach(o=>{const r=this.lineArr.findIndex(a=>a.id===o);if(r>=0&&s){this.lineArr.splice(r,1);const a=s.querySelector("#"+o);a&&s.removeChild(a)}})}lineAdd(n,s,o="linear-gradient(90deg, #2222ff,#ddddff )"){const r=`line-${Math.random().toString(36).slice(2,9)}`;this.lineArr.push({start:n,vec:s,id:r});const a=this.rander.domElement.parentElement;if(!a)return;const e=a.clientWidth,R=a.clientHeight/2,A=e/2,h=document.createElement("div");h.id=r,h.style.position="absolute",h.style.background=o;let b=s.length();b<20&&(b*=20),h.style.left=`${n.x+A}px`,h.style.top=`${R-n.y}px`,h.style.width=`${b}px`,h.style.height=`${1}px`;const T=-s.angle()*180/Math.PI,C=b/2*Math.sin(T*Math.PI/180),V=b/2*(1-Math.cos(T*Math.PI/180));return h.style.transform=`rotate(${T}deg) translate(${V}px, ${C}px)`,a.appendChild(h),r}webLineAdd(n,s,o="linear-gradient(90deg, #2222ff,#ddddff )"){return this.lineAdd(new X(n.x,-n.y),new X(s.x,-s.y),o)}}let pt=null;function At(p,n,s){pt=new lt(p,n,s)}const Mt=(p,n,s)=>{const o=new Q;o.makeRotationAxis(n.normalize(),s),o.multiply(p.matrix),p.matrix=o,p.rotation.setFromRotationMatrix(p.matrix)},bt=(p,n,s)=>{const o=n*.5,r=s*.5,a=p.x*o+o,e=r-p.y*r;return{x:a,y:e}};class it extends Z{constructor(s,o,r,a,e){super();B(this,"parameters");this.type="RoundedBoxGeometry",e=isNaN(e)?1:Math.max(1,Math.floor(e)),s=isNaN(s)?1:s,o=isNaN(o)?1:o,r=isNaN(r)?1:r,a=isNaN(a)?.15:a,a=Math.min(a,Math.min(s,Math.min(o,Math.min(r)))/2);const F=s/2-a,R=o/2-a,A=r/2-a;this.parameters={width:s,height:o,depth:r,radius:a,radiusSegments:e};const h=e+1,b=h*e+1<<3,T=new W(new Float32Array(b*3),3),C=new W(new Float32Array(b*3),3),V=[],g=[],I=new w,z=[],L=[],t=[],H=h*e,u=h*e+1;_(),j(),v(),J(),q(),K();function _(){const l=[new w(1,1,1),new w(1,1,-1),new w(-1,1,-1),new w(-1,1,1),new w(1,-1,1),new w(1,-1,-1),new w(-1,-1,-1),new w(-1,-1,1)];for(let c=0;c<8;c++)V.push([]),g.push([]);const y=Math.PI/2,i=new w(F,R,A);for(let c=0;c<=e;c++){const M=c/e*y,x=Math.cos(M),d=Math.sin(M);if(c==e){I.set(0,1,0);const m=I.clone().multiplyScalar(a).add(i);V[0].push(m),z.push(m);const P=I.clone();g[0].push(P),L.push(P);continue}for(let m=0;m<=e;m++){const E=m/e*y;I.x=x*Math.cos(E),I.y=d,I.z=x*Math.sin(E);const N=I.clone().multiplyScalar(a).add(i);V[0].push(N),z.push(N);const $=I.clone().normalize();g[0].push($),L.push($)}}for(let c=1;c<8;c++)for(let f=0;f<V[0].length;f++){const M=V[0][f].clone().multiply(l[c]);V[c].push(M),z.push(M);const x=g[0][f].clone().multiply(l[c]);g[c].push(x),L.push(x)}}function v(){const l=[!0,!1,!0,!1,!1,!0,!1,!0],y=h*(e-1);for(let i=0;i<8;i++){const c=u*i;for(let f=0;f<e-1;f++){const M=f*h,x=(f+1)*h;for(let d=0;d<e;d++){const m=d+1,P=c+M+d,E=c+M+m,N=c+x+d,$=c+x+m;l[i]?(t.push(P),t.push(N),t.push(E),t.push(E),t.push(N),t.push($)):(t.push(P),t.push(E),t.push(N),t.push(E),t.push($),t.push(N))}}for(let f=0;f<e;f++){const M=c+y+f,x=c+y+f+1,d=c+H;l[i]?(t.push(M),t.push(d),t.push(x)):(t.push(M),t.push(x),t.push(d))}}}function j(){let l=H,y=H+u,i=H+u*2,c=H+u*3;t.push(l),t.push(y),t.push(i),t.push(l),t.push(i),t.push(c),l=H+u*4,y=H+u*5,i=H+u*6,c=H+u*7,t.push(l),t.push(i),t.push(y),t.push(l),t.push(c),t.push(i),l=0,y=u,i=u*4,c=u*5,t.push(l),t.push(i),t.push(y),t.push(y),t.push(i),t.push(c),l=u*2,y=u*3,i=u*6,c=u*7,t.push(l),t.push(i),t.push(y),t.push(y),t.push(i),t.push(c),l=e,y=e+u*3,i=e+u*4,c=e+u*7,t.push(l),t.push(y),t.push(i),t.push(y),t.push(c),t.push(i),l=e+u,y=e+u*2,i=e+u*5,c=e+u*6,t.push(l),t.push(i),t.push(y),t.push(y),t.push(i),t.push(c)}function J(){for(let l=0;l<4;l++){const y=l*u,i=4*u+y,c=(l&1)===1;for(let f=0;f<e;f++){const M=f+1,x=y+f,d=y+M,m=i+f,P=i+M;c?(t.push(x),t.push(m),t.push(d),t.push(d),t.push(m),t.push(P)):(t.push(x),t.push(d),t.push(m),t.push(d),t.push(P),t.push(m))}}}function K(){const l=[0,2,4,6],y=[1,3,5,7];for(let i=0;i<4;i++){const c=u*l[i],f=u*y[i],M=1>=i;for(let x=0;x<e;x++){const d=x*h,m=(x+1)*h,P=c+d,E=c+m,N=f+d,$=f+m;M?(t.push(P),t.push(N),t.push(E),t.push(E),t.push(N),t.push($)):(t.push(P),t.push(E),t.push(N),t.push(E),t.push($),t.push(N))}}}function q(){const l=e-1,y=[0,1,4,5],i=[3,2,7,6],c=[0,1,1,0];for(let f=0;f<4;f++){const M=y[f]*u,x=i[f]*u;for(let d=0;d<=l;d++){const m=M+e+d*h,P=M+(d!=l?e+(d+1)*h:u-1),E=x+e+d*h,N=x+(d!=l?e+(d+1)*h:u-1);c[f]?(t.push(m),t.push(E),t.push(P),t.push(P),t.push(E),t.push(N)):(t.push(m),t.push(P),t.push(E),t.push(P),t.push(N),t.push(E))}}}let D=0;for(let l=0;l<z.length;l++)T.setXYZ(D,z[l].x,z[l].y,z[l].z),C.setXYZ(D,L[l].x,L[l].y,L[l].z),D++;this.setIndex(new W(new Uint16Array(t),1)),this.setAttribute("position",T),this.setAttribute("normal",C)}}const ut=new et;class ft extends k{constructor(s,o){const r=new rt,a=.15,e=-o*.5,F=-o*.5+o*a,R=o*.5-o*a,A=o*.5,h=-o*.5,b=-o*.5+o*a,T=o*.5-o*a,C=o*.5;r.moveTo(F,C),r.lineTo(R,C),r.bezierCurveTo(A,C,A,C,A,T),r.lineTo(A,b),r.bezierCurveTo(A,h,A,h,R,h),r.lineTo(F,h),r.bezierCurveTo(e,h,e,h,e,b),r.lineTo(e,T),r.bezierCurveTo(e,C,e,C,F,C);const V=new at(r),g=new G({color:s.color,specular:s.color,shininess:10});super(V,g);B(this,"face_");this.face_=s}}function yt(p,n,s){const o=[],r=new ft(p,n);r.scale.set(.8,.8,1);let a=new Q;if(p.dir.equals(new w(0,0,1)))a=null;else if(p.dir.equals(new w(0,0,-1)))a.makeRotationAxis(new w(0,1,0),-Math.PI);else{const F=p.dir.clone().cross(new w(0,0,1));a.makeRotationAxis(F.normalize(),-Math.PI/2)}a&&r.rotation.setFromRotationMatrix(a);const e=p.dir.clone().multiplyScalar(.501*n);if(r.position.set(e.x,e.y,e.z),o.push(r),s){const F=ut.load("https://pengfeiw.github.io/assests/logo/w.png"),R=new ht(1,1,1),A=new G({map:F,transparent:!0,specular:16724787,shininess:10}),h=new k(R,A);a&&h.rotation.setFromRotationMatrix(a),h.scale.set(.8,.8,1);const b=p.dir.clone().multiplyScalar(.502*n);h.position.set(b.x,b.y,b.z),o.push(h)}return o}function dt(p,n,s){const o=(s.x-(p-1)/2)*n,r=(s.y-(p-1)/2)*n,a=(s.z-(p-1)/2)*n;return new w(o,r,a)}function Pt(p,n,s){const o=s.x/n+(p-1)/2,r=s.y/n+(p-1)/2,a=s.z/n+(p-1)/2;return new w(o,r,a)}const Et=(p,n,s,o)=>{var A;const r=new xt(s),a=new it(n,n,n,n*.1,p<8?5:1),e=new G({color:o,specular:"#eeeeee",shininess:10}),F=new k(a,e);r.add(F),(A=s.face)==null||A.forEach(h=>{yt(h,n,s.withLogo).forEach(T=>{r.add(T)})});const R=dt(p,n,s.position);return r.rotation.setFromRotationMatrix(new Q().makeRotationFromEuler(s.rotation)),r.position.set(R.x,R.y,R.z),r};class xt extends ct{constructor(s){super();B(this,"element");this.element=s}}export{ft as F,Et as c,pt as d,At as i,bt as n,Mt as r,Pt as s};
